/**
 * @author Rohan K.M rohan.mahendroo@gmail.com
 * BillingCycleListener
 * com.app.project.acropolis.monitor.plan
 * BillingCycleListener.java
 * Created - 2013-11-15 12:01:20 PM	
 * Modified - 2013-11-15 12:01:20 PM
 * TODO
 * NOTES - 
 */
package com.app.project.acropolis.monitor.plan;

import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.TimeZone;

import com.app.project.acropolis.GlobalConstants;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;


/**
 * BroadcastReceiver listening date change against bill date 
 */
public class BillingCycleListener extends BroadcastReceiver 
{
	
	/* (non-Javadoc)
	 * @see android.content.BroadcastReceiver#onReceive(android.content.Context, android.content.Intent)
	 */
	@Override
	public void onReceive(Context context, Intent intent) 
	{
		Date currentDate = Calendar.getInstance().getTime();
		SimpleDateFormat daySDF = new SimpleDateFormat("dd");
		int adjustTZ = differenceOnTimeZone();
		int currentDay = Integer.parseInt(daySDF.format(currentDate));

		
		
	}

	/**
	 * Checks TimeZone difference if there 
	 * @return difference of time zone in GMT hrs. 0 if locale is same as billing
	 */
	private int differenceOnTimeZone()
	{
		int difference = 0;
		TimeZone currentTimeZone = TimeZone.getDefault();
		Calendar currentTimeZoneDate = new GregorianCalendar(currentTimeZone);
		
		TimeZone billingTimeZone = TimeZone.getTimeZone(GlobalConstants.CPH_TIMEZONE);
		
		if(billingTimeZone.hasSameRules(currentTimeZone))
		{
			difference=0;
		}
		else
		{
			difference = 0;
		}
		
		return difference;
	}
	
}