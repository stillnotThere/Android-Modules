/**
 * @author Rohan K.M rohan.mahendroo@gmail.com
 * CallStateListener
 * com.acropolis.module.call
 * CallStateListener.java
 * Created - 2013-10-10 3:48:50 PM	
 * Modified - 2013-10-10 3:48:50 PM
 * TODO
 * NOTES - 
 */
package com.acropolis.module.call;

import android.telephony.PhoneStateListener;
import android.telephony.TelephonyManager;

/**
 * @author CPH-iMac
 *
 */
public class CallStateListener extends PhoneStateListener
{

	boolean numberPresent = false;
	boolean incoming = false;
	boolean missed = false;

	boolean ringing = false;
	boolean offhook = false;
	boolean idle = false;

	public void onCallStateChanged(int state,String incomingNumber)
	{

		switch(state)
		{
		case TelephonyManager.CALL_STATE_IDLE:
			ringing = false;
			offhook = false;

		case TelephonyManager.CALL_STATE_OFFHOOK:
			strState = "OFF HOOK";
			++j;

			if(incomingNumber!=null)
			{
				if(ringing)
				{
					offhook = true;
					if(offhook)
					{
						incoming = true;
						Logger.Debug("Incoming call");

						//flushing
						offhook = false;
					}
					//flushing
					ringing = false;
				}		
			}


		case TelephonyManager.CALL_STATE_RINGING:
			strState = "RINGING";
			++k;

			if(incomingNumber!=null)
			{
				ringing = true;
			}

		}

		incoming = false;

	}

}
