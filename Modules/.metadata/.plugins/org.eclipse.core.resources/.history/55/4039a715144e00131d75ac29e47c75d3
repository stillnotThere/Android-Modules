/**
 * @author Rohan K.M rohan.mahendroo@gmail.com
 * CheckPlan
 * com.app.project.acropolis.monitor.bill
 * CheckPlan.java
 * Created - 2013-11-13 3:16:43 PM	
 * Modified - 2013-11-13 3:16:43 PM
 * TODO
 * NOTES - 
 */
package com.app.project.acropolis.monitor.plan;

import java.text.SimpleDateFormat;

import com.app.project.acropolis.GlobalConstants;
import com.app.project.acropolis.comm.DataTumblr;
import com.app.project.acropolis.comm.SocketClientConnector;
import com.app.project.acropolis.database.DBAdapter;
import com.app.project.acropolis.database.DBOpenHelper;

/**
 * @author CPH-iMac
 *
 */
public class CheckPlan 
{
	
	public static void checkBillDate()
	{
		//TODO
		SimpleDateFormat sdf = new SimpleDateFormat("");
		
		long BillDate = 0; //milli
		String formattedBD = DBAdapter.getValue(DBOpenHelper.BILL_DATE);
//		long longDB_date = 
	}
	
	
	private static long fetchPlan(String key)
	{
		long db_val = 0;
		db_val = Long.parseLong(DBAdapter.getValue(key));
		return db_val;
	}
	
	/**
	 * Check monitored data against mobile plan, if crossed threshold or exceeded plan
	 * user will be notified as well CPH server 
	 * @param _key DB key
	 * @param _recorded	DB key value
	 */
	public static void compare_set(String _key,String _recorded)
	{
		long stored = fetchPlan(_key);
		long recorded = Long.parseLong(_recorded);
		long threshold = GlobalConstants.PlanThreshold;
		
		if(stored < recorded)
		{
			
			if(stored == recorded) 
			{
				alertPlanEnding();
			}
			
			
		}
		
		
	}
	
	private static void alertPlanEnding()
	{
		DataTumblr.setSendClientData("");
		new Thread(new SocketClientConnector.SokcetClientUrgentConnector()).start();
	}

	
	
}
